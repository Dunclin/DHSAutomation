<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DHS Automation</title>

  <!-- Firebase Compat (email/password auth) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div class="nav">
      <div class="brand">DHS Automation</div>
      <nav>
        <a href="#home">Home</a>
        <a href="#remote">Remote Work</a>
        <a href="#account" id="accountLink">Account</a>
        <a href="#contact">Contact</a>
        <a href="#" id="openAuth">Sign In / Sign Up</a>
        <a href="#" id="logoutLink">Log Out</a>
      </nav>
    </div>
  </header>

  <!-- Hero like the early version -->
  <section class="hero">
    <div class="hero-inner">
      <h1>Industrial PLC Automation</h1>
      <p>Remote PLC programming, troubleshooting, and automation consulting.</p>
      <div class="cta">
        <a href="#remote"><button class="btn primary">Book Remote Session</button></a>
        <button class="btn ghost" id="openAuthHero">Sign In / Sign Up</button>
      </div>
    </div>
  </section>

  <main>
    <!-- HOME: a single clean card (no forms in body) -->
    <section id="home" class="route active">
      <div class="card">
        <h2>Why DHS Automation?</h2>
        <p>We deliver clean, reliable control systems and fast remote support across Allen‑Bradley, Siemens, and more.</p>
      </div>
    </section>

    <!-- REMOTE -->
    <section id="remote" class="route">
      <div class="card">
        <h2>Remote PLC Work</h2>
        <p>Please sign in to see your personalized Zoom session.</p>
      </div>
    </section>

    <!-- ACCOUNT (hidden until signed in) -->
    <section id="account" class="route">
      <div class="card">
        <h2>Account</h2>
        <p>Welcome — you’re signed in.</p>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="route">
      <div class="card">
        <h2>Contact</h2>
        <p>Tell us about your application — we’ll reply quickly.</p>
      </div>
    </section>
  </main>

  <footer>
    © 2025 DHS Automation
  </footer>

  <!-- AUTH MODAL -->
  <div id="overlay" class="overlay"></div>
  <div id="authModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="authTitle">
    <h3 id="authTitle">Sign In / Sign Up</h3>
    <input id="email" type="email" placeholder="Email" autocomplete="email" />
    <input id="password" type="password" placeholder="Password" autocomplete="current-password" />
    <div class="actions">
      <button class="btn alt" id="closeAuth">Cancel</button>
      <button class="btn" id="continueAuth">Continue</button>
    </div>
  </div>

  <script>
    // Replace with your real Firebase project config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      appId: "YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // Simple SPA routing
    const routes = Array.from(document.querySelectorAll('.route'));
    const showRoute = (id) => {
      routes.forEach(r => r.classList.toggle('active', r.id === id));
      window.scrollTo({ top: 0, behavior: 'instant' });
    };
    window.addEventListener('hashchange', () => showRoute((location.hash || '#home').slice(1)));
    showRoute((location.hash || '#home').slice(1));

    // Modal controls
    const overlay = document.getElementById('overlay');
    const authModal = document.getElementById('authModal');
    const openAuth = document.getElementById('openAuth');
    const openAuthHero = document.getElementById('openAuthHero');
    const closeAuth = document.getElementById('closeAuth');
    const continueAuth = document.getElementById('continueAuth');
    const emailEl = document.getElementById('email');
    const passEl = document.getElementById('password');
    const accountLink = document.getElementById('accountLink');
    const logoutLink = document.getElementById('logoutLink');

    function openModal() { overlay.style.display = 'block'; authModal.style.display = 'block'; }
    function closeModal() { overlay.style.display = 'none'; authModal.style.display = 'none'; }

    [openAuth, openAuthHero].forEach(btn => btn?.addEventListener('click', (e) => { e.preventDefault(); openModal(); }));
    closeAuth.addEventListener('click', (e) => { e.preventDefault(); closeModal(); });
    overlay.addEventListener('click', closeModal);
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

    // Auth: sign in or create account
    continueAuth.addEventListener('click', async () => {
      const email = (emailEl.value || '').trim();
      const password = passEl.value || '';
      if (!email || !password) { alert('Enter email and password'); return; }
      try {
        await auth.signInWithEmailAndPassword(email, password);
        closeModal(); location.hash = '#account';
      } catch (e) {
        try {
          await auth.createUserWithEmailAndPassword(email, password);
          closeModal(); location.hash = '#account';
        } catch (err) {
          alert(err.message);
        }
      }
    });

    // Logout
    logoutLink.addEventListener('click', async (e) => {
      e.preventDefault();
      try { await auth.signOut(); location.hash = '#home'; } catch (err) { alert(err.message); }
    });

    // Auth state
    auth.onAuthStateChanged((user) => {
      if (user) {
        accountLink.style.display = 'inline';
        logoutLink.style.display = 'inline';
        openAuth.style.display = 'none';
        if (openAuthHero) openAuthHero.style.display = 'none';
      } else {
        accountLink.style.display = 'none';
        logoutLink.style.display = 'none';
        openAuth.style.display = 'inline';
        if (openAuthHero) openAuthHero.style.display = 'inline-block';
      }
    });
  </script>
</body>
</html>
